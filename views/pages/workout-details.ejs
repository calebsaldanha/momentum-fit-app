<%- include('../partials/header.ejs', { title, bodyClass: 'dashboard-body' }) %>
<div class="dashboard-container">
    <% if (user && user.role === 'client') { %>
        <%- include('../partials/client-sidebar.ejs') %>
    <% } else { %>
        <%- include('../partials/admin-sidebar.ejs') %>
    <% } %>
    
    <main class="dashboard-main">
        <section class="section">
            <div class="section-header">
                <div>
                    <h1><%= workout.title %></h1>
                    <p>
                        Instrutor: <%= workout.trainer_name || 'Momentum Fit' %>
                        <% if (workout.updated_at) { %>
                            <span style="font-size: 0.8em; opacity: 0.7; margin-left: 10px;">
                                (Atualizado em: <%= new Date(workout.updated_at).toLocaleDateString() %>)
                            </span>
                        <% } %>
                    </p>
                </div>
                <div class="actions" style="display: flex; gap: 10px;">
                    <a href="javascript:history.back()" class="btn btn-secondary">Voltar</a>
                    
                    <% if (user && (user.role === 'trainer' || user.role === 'superadmin')) { %>
                        <a href="/workouts/edit/<%= workout.id %>" class="btn btn-primary">Editar Treino</a>
                    <% } %>
                </div>
            </div>

            <% if (workout.description) { %>
                <div class="workout-description" style="background: var(--c-bg-card); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem; border: 1px solid var(--c-border);">
                    <h4 style="margin-bottom: 0.5rem; color: var(--c-accent-primary);">Sobre este treino</h4>
                    <p><%= workout.description %></p>
                </div>
            <% } %>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th style="width: 30%;">Exercício</th>
                            <th style="width: 20%;">Séries x Reps</th>
                            <th>Observações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% (workout.exercises || []).forEach(ex => { %>
                            <tr>
                                <td><strong style="color: var(--c-text-primary);"><%= ex.name %></strong></td>
                                <td><%= ex.sets %></td>
                                <td><%= ex.description || '-' %></td>
                            </tr>
                        <% }) %>
                        
                        <% if (!workout.exercises || workout.exercises.length === 0) { %>
                            <tr>
                                <td colspan="3" style="text-align: center; padding: 2rem;">Nenhum exercício cadastrado.</td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </section>
    </main>
</div>
<%- include('../partials/footer.ejs') %>
