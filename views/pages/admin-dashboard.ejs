<%- include('../partials/header') %>
<div class="dashboard-container">
    <%- include('../partials/sidebar', { path: '/admin/dashboard' }) %>
    
    <main class="dashboard-main">
        <div class="page-header">
            <h1>Painel <span class="text-neon">Administrativo</span></h1>
            <p style="color: #a0a0a0;">Vis√£o geral do sistema e m√©tricas.</p>
        </div>

        <div class="features-grid" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px;">
            
            <div class="card-box" style="display: flex; align-items: center; gap: 20px;">
                <div style="font-size: 2.5rem; color: var(--primary-color);"><i class="fas fa-users"></i></div>
                <div>
                    <h3 style="margin: 0; font-size: 2rem; color: white;"><%= stats.totalUsers || 0 %></h3>
                    <p style="margin: 0; color: #888;">Total Usu√°rios</p>
                </div>
            </div>

            <div class="card-box" style="display: flex; align-items: center; gap: 20px;">
                <div style="font-size: 2.5rem; color: #10b981;"><i class="fas fa-check-circle"></i></div>
                <div>
                    <h3 style="margin: 0; font-size: 2rem; color: white;"><%= stats.activeSubs || 0 %></h3>
                    <p style="margin: 0; color: #888;">Assinaturas Ativas</p>
                </div>
            </div>

            <div class="card-box" style="display: flex; align-items: center; gap: 20px;">
                <div style="font-size: 2.5rem; color: #f59e0b;"><i class="fas fa-user-clock"></i></div>
                <div>
                    <h3 style="margin: 0; font-size: 2rem; color: white;"><%= stats.pendingTrainers || 0 %></h3>
                    <p style="margin: 0; color: #888;">Aprova√ß√µes Pendentes</p>
                </div>
            </div>

        </div>

        <div class="card-box">
            <h3 style="color: white; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                Usu√°rios Recentes
            </h3>
            
            <div class="table-responsive">
                <table style="width: 100%; min-width: 600px; border-collapse: collapse;">
                    <thead>
                        <tr style="text-align: left; background: rgba(255,255,255,0.05);">
                            <th style="padding: 12px; color: #ccc;">Nome</th>
                            <th style="padding: 12px; color: #ccc;">Email</th>
                            <th style="padding: 12px; color: #ccc;">Tipo</th>
                            <th style="padding: 12px; color: #ccc;">Status</th>
                            <th style="padding: 12px; color: #ccc;">Data</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (recentUsers && recentUsers.length > 0) { %>
                            <% recentUsers.forEach(u => { %>
                                <tr style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                                    <td style="padding: 12px; color: white;"><%= u.name %></td>
                                    <td style="padding: 12px; color: #aaa;"><%= u.email %></td>
                                    <td style="padding: 12px;">
                                        <span style="
                                            padding: 4px 10px; border-radius: 12px; font-size: 0.8rem; font-weight: bold;
                                            background: <%= u.role === 'admin' ? '#ef4444' : (u.role === 'trainer' ? '#3b82f6' : '#10b981') %>;
                                            color: white;
                                        ">
                                            <%= u.role.toUpperCase() %>
                                        </span>
                                    </td>
                                    <td style="padding: 12px;">
                                        <%= u.status === 'active' ? 'Ìø¢ Ativo' : (u.status === 'pending_approval' ? 'Ìø° Pendente' : 'Ì¥¥ Inativo') %>
                                    </td>
                                    <td style="padding: 12px; color: #888;">
                                        <%= new Date(u.created_at).toLocaleDateString() %>
                                    </td>
                                </tr>
                            <% }) %>
                        <% } else { %>
                            <tr>
                                <td colspan="5" style="padding: 20px; text-align: center; color: #666;">Nenhum usu√°rio recente.</td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
            
            <div style="margin-top: 20px; text-align: right;">
                <a href="/admin/users" class="btn btn-outline btn-sm">Ver Todos</a>
            </div>
        </div>

    </main>
</div>
<%- include('../partials/footer') %>
