<%- include('../partials/header.ejs') %>

<div class="dashboard-container">
    <%- include('../partials/sidebar.ejs') %>

    <main class="dashboard-main">
        <header class="page-header" style="border:none; padding-bottom: 10px;">
            <h1 style="font-size: 1.8rem;">Painel do Treinador Ì∫Ä</h1>
            <p style="color: var(--text-muted);">Vis√£o geral da sua carteira de alunos.</p>
        </header>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px;">
            <div class="card-box" style="display: flex; align-items: center; gap: 20px;">
                <div style="background: rgba(190, 242, 2, 0.1); width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--primary-color); font-size: 1.5rem;">
                    <i class="fas fa-users"></i>
                </div>
                <div>
                    <span style="display: block; font-size: 2rem; font-weight: 700; line-height: 1;"><%= activeClients %></span>
                    <small style="color: #888;">Alunos Ativos</small>
                </div>
            </div>

            <div class="card-box" style="display: flex; align-items: center; gap: 20px;">
                <div style="background: rgba(255, 255, 255, 0.05); width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <div>
                    <span style="display: block; font-size: 2rem; font-weight: 700; line-height: 1;"><%= totalWorkouts %></span>
                    <small style="color: #888;">Treinos Criados</small>
                </div>
            </div>

            <div class="card-box" style="display: flex; align-items: center; gap: 20px;">
                <div style="background: rgba(255, 255, 255, 0.05); width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                    <i class="fas fa-wallet"></i>
                </div>
                <div>
                    <span style="display: block; font-size: 2rem; font-weight: 700; color: #fff;">R$ <%= estimatedRevenue %></span>
                    <small style="color: #888;">Receita Prevista</small>
                </div>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">
            <div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 style="color: white; font-size: 1.2rem;">√öltimas Atividades</h3>
                    <a href="/trainer/clients" class="btn btn-sm btn-outline">Ver Todos</a>
                </div>

                <div class="card-box" style="padding: 0; overflow: hidden;">
                    <% if (recentCheckins && recentCheckins.length > 0) { %>
                        <table style="width: 100%; border-collapse: collapse;">
                            <% recentCheckins.forEach(checkin => { %>
                                <tr style="border-bottom: 1px solid #222;">
                                    <td style="padding: 15px 20px;">
                                        <div style="display: flex; align-items: center; gap: 15px;">
                                            <div style="width: 35px; height: 35px; background: #333; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #666;">
                                                <i class="fas fa-user"></i>
                                            </div>
                                            <div>
                                                <strong style="color: white; display: block;"><%= checkin.client_name %></strong>
                                                <span style="color: #666; font-size: 0.8rem;">Concluiu: <%= checkin.workout_title %></span>
                                            </div>
                                        </div>
                                    </td>
                                    <td style="padding: 15px 20px; text-align: right;">
                                        <span style="background: #222; color: var(--primary-color); padding: 4px 10px; border-radius: 4px; font-size: 0.8rem;">
                                            Esfor√ßo: <%= checkin.effort_level %>/10
                                        </span>
                                    </td>
                                </tr>
                            <% }); %>
                        </table>
                    <% } else { %>
                        <div style="padding: 40px; text-align: center; color: #666;">
                            <i class="far fa-clock" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                            Nenhuma atividade recente.
                        </div>
                    <% } %>
                </div>
            </div>

            <div>
                <h3 style="color: white; font-size: 1.2rem; margin-bottom: 20px;">Acesso R√°pido</h3>
                
                <a href="/workouts/create" class="card-box" style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; text-decoration: none; transition: transform 0.2s; border: 1px dashed var(--primary-color); background: rgba(190, 242, 2, 0.05);">
                    <div style="background: var(--primary-color); width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: black;">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div>
                        <strong style="color: white; display: block;">Novo Treino</strong>
                        <span style="color: #888; font-size: 0.8rem;">Prescrever exerc√≠cio</span>
                    </div>
                </a>

                <a href="/trainer/library" class="card-box" style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px; text-decoration: none;">
                    <div style="background: #333; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                        <i class="fas fa-book"></i>
                    </div>
                    <div>
                        <strong style="color: white; display: block;">Biblioteca</strong>
                        <span style="color: #888; font-size: 0.8rem;">Gerenciar exerc√≠cios</span>
                    </div>
                </a>
            </div>
        </div>

    </main>
</div>

<%- include('../partials/footer.ejs') %>
