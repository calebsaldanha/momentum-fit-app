<%- include('../partials/header.ejs') %>
<div class="dashboard-container">
    <%- include('../partials/sidebar.ejs') %>
    <main class="dashboard-main">
        <div class="content-wrapper">
            <div class="page-header">
                <h1>Financeiro</h1>
                <p class="text-muted">Visão consolidada da receita.</p>
            </div>

            <div class="card-box" style="margin-bottom: 30px; display: inline-block; padding-right: 50px;">
                <span class="text-muted">Receita Total (Mensal)</span>
                <h1 style="font-size: 2.5rem; color: var(--primary-color);">R$ <%= revenue.toFixed(2) %></h1>
            </div>

            <div class="card-box">
                <h3>Últimas Transações</h3>
                <br>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Usuário</th>
                            <th>Plano</th>
                            <th>Valor</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% transactions.forEach(t => { %>
                        <tr>
                            <td><%= t.user %></td>
                            <td><%= t.plan %></td>
                            <td>R$ <%= t.amount.toFixed(2) %></td>
                            <td><%= t.status %></td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
        <%- include('../partials/footer.ejs') %>
    </main>
</div>
