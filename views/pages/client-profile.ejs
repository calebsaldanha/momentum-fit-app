<%- include('../partials/header.ejs') %>

<div class="dashboard-container">
    <%- include('../partials/sidebar.ejs') %>

    <main class="dashboard-main">
        <div class="page-header">
            <h1 style="font-size: 1.8rem;">Minha Anamnese</h1>
            <p style="color: var(--text-muted);">Mantenha seus dados sempre atualizados.</p>
        </div>

        <% const safeMeas = (clientData && clientData.body_measurements) ? clientData.body_measurements : {}; %>

        <form action="/client/profile/update" method="POST" style="max-width: 900px;">
            
            <div class="card-box">
                <h3 style="color: white; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px;">Dados Físicos</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label>Peso (kg)</label>
                        <input type="number" step="0.1" name="current_weight" value="<%= clientData.current_weight || '' %>" required class="form-control" style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white;">
                    </div>
                    <div>
                        <label>Altura (m)</label>
                        <input type="number" step="0.01" name="height" value="<%= clientData.height || '' %>" required class="form-control" style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white;">
                    </div>
                </div>
            </div>

            <div class="card-box">
                <h3 style="color: white; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px;">Estilo de Vida (Novo)</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label>Horas de Sono</label>
                        <select name="sleep_hours" style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white;">
                            <option value="Menos de 5h" <%= clientData.sleep_hours === 'Menos de 5h' ? 'selected' : '' %>>- 5h (Ruim)</option>
                            <option value="5-6h" <%= clientData.sleep_hours === '5-6h' ? 'selected' : '' %>>5-6h (Médio)</option>
                            <option value="7-8h" <%= clientData.sleep_hours === '7-8h' ? 'selected' : '' %>>7-8h (Bom)</option>
                            <option value="Mais de 8h" <%= clientData.sleep_hours === 'Mais de 8h' ? 'selected' : '' %>>+ 8h</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Nível de Estresse</label>
                        <select name="stress_level" style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white;">
                            <option value="Baixo" <%= clientData.stress_level === 'Baixo' ? 'selected' : '' %>>Baixo</option>
                            <option value="Moderado" <%= clientData.stress_level === 'Moderado' ? 'selected' : '' %>>Moderado</option>
                            <option value="Alto" <%= clientData.stress_level === 'Alto' ? 'selected' : '' %>>Alto</option>
                        </select>
                    </div>
                </div>
            </div>

            <div style="text-align: right; margin-top: 20px;">
                <button type="submit" class="btn btn-primary btn-lg">Salvar Anamnese</button>
            </div>
        </form>
    </main>
</div>

<%- include('../partials/footer.ejs') %>
