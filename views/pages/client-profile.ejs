<%- include('../partials/header.ejs', { title: 'Meu Perfil', bodyClass: 'dashboard-body' }) %>
<div class="dashboard-container">
    <%- include('../partials/client-sidebar.ejs', { currentPage: 'profile' }) %>
    <main class="dashboard-main">
        <section class="section">
            <div class="section-header">
                <h1>Meu Perfil</h1>
                <% if (typeof success !== 'undefined' && success) { %>
                    <div style="background: #d1fae5; color: #065f46; padding: 10px; border-radius: 6px; margin-top: 10px;"><%= success %></div>
                <% } %>
            </div>

            <div style="background: #222; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid var(--c-accent-primary); display: inline-block;">
                <h3 style="margin: 0; font-size: 0.9rem; color: #ccc;">IMC Calculado</h3>
                <div style="display: flex; align-items: baseline; gap: 5px;">
                    <span style="font-size: 2rem; font-weight: 800; color: white;"><%= typeof imc !== 'undefined' ? imc : '--' %></span>
                    <span style="color: #666;">kg/mÂ²</span>
                </div>
            </div>

            <form method="POST" action="/client/profile" class="dashboard-form">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <div class="form-group"><label>Nome</label><input type="text" name="name" value="<%= profile.name || user.name %>" required></div>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                    <div class="form-group"><label>Idade</label><input type="number" name="age" value="<%= profile.age %>"></div>
                    <div class="form-group"><label>Peso (kg)</label><input type="number" step="0.1" name="weight" value="<%= profile.weight %>"></div>
                    <div class="form-group"><label>Altura (m)</label><input type="number" step="0.01" name="height" value="<%= profile.height %>"></div>
                </div>
                <button type="submit" class="btn btn-primary">Salvar</button>
            </form>
        </section>
    </main>
</div>
<%- include('../partials/footer.ejs') %>
