<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <%- include('../layouts/app/head') %>
    <title>Perfil e Anamnese | Momentum Fit</title>
</head>
<body>
    <div class="dashboard-wrapper">
        <%- include('../partials/sidebar') %>
        <div class="main-content">
            <%- include('../partials/app-header', { title: 'Sua Ficha Técnica' }) %>

            <div class="content-scroll-area">
                <div style="max-width: 900px; margin: 0 auto;">
                    
                    <%- include('../partials/flash') %>

                    <form action="/client/profile/update" method="POST">
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-id-card"></i> Dados Básicos</h3>
                            </div>
                            <div class="grid-2">
                                <div class="form-group">
                                    <label>Nome Completo</label>
                                    <input type="text" name="name" value="<%= user.name %>" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>E-mail</label>
                                    <input type="text" value="<%= user.email %>" class="form-control" disabled style="opacity: 0.5;">
                                </div>
                                <div class="form-group">
                                    <label>Telefone / WhatsApp</label>
                                    <input type="text" name="phone" value="<%= user.phone || '' %>" class="form-control" placeholder="(00) 00000-0000">
                                </div>
                                <div class="form-group">
                                    <label>Idade</label>
                                    <input type="number" name="anamnesis[age]" value="<%= anamnesis.age || '' %>" class="form-control">
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-user"></i> Identidade</h3>
                            </div>
                            <div class="grid-2">
                                <div class="form-group">
                                    <label>Qual é o seu gênero?</label>
                                    <select name="anamnesis[gender]" class="form-control">
                                        <option value="">Selecione</option>
                                        <option value="Masculino" <%= anamnesis.gender === 'Masculino' ? 'selected' : '' %>>Masculino</option>
                                        <option value="Feminino" <%= anamnesis.gender === 'Feminino' ? 'selected' : '' %>>Feminino</option>
                                        <option value="Não-binário" <%= anamnesis.gender === 'Não-binário' ? 'selected' : '' %>>Não-binário</option>
                                        <option value="Outro" <%= anamnesis.gender === 'Outro' ? 'selected' : '' %>>Outro</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Sexo atribuído ao nascimento</label>
                                    <select name="anamnesis[sex_at_birth]" class="form-control">
                                        <option value="">Selecione</option>
                                        <option value="Masculino" <%= anamnesis.sex_at_birth === 'Masculino' ? 'selected' : '' %>>Masculino</option>
                                        <option value="Feminino" <%= anamnesis.sex_at_birth === 'Feminino' ? 'selected' : '' %>>Feminino</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Você está em processo de transição ou tratamento hormonal?</label>
                                <select name="anamnesis[hormonal_transition]" class="form-control" onchange="document.getElementById('trans-details').style.display = this.value === 'Sim' ? 'block' : 'none'">
                                    <option value="Não" <%= anamnesis.hormonal_transition === 'Não' ? 'selected' : '' %>>Não</option>
                                    <option value="Sim" <%= anamnesis.hormonal_transition === 'Sim' ? 'selected' : '' %>>Sim</option>
                                </select>
                            </div>
                            <div class="form-group" id="trans-details" style="display: <%= anamnesis.hormonal_transition === 'Sim' ? 'block' : 'none' %>;">
                                <label>Comente sobre o processo (tempo, medicamentos, etc)</label>
                                <textarea name="anamnesis[transition_details]" class="form-control" rows="2"><%= anamnesis.transition_details || '' %></textarea>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-bullseye"></i> Objetivos</h3>
                            </div>
                            <div class="form-group">
                                <label>Objetivo Principal</label>
                                <input type="text" name="anamnesis[primary_goal]" value="<%= anamnesis.primary_goal || '' %>" class="form-control" placeholder="Ex: Hipertrofia, Emagrecimento...">
                            </div>
                            <div class="form-group">
                                <label>Objetivos Secundários</label>
                                <input type="text" name="anamnesis[secondary_goals]" value="<%= anamnesis.secondary_goals || '' %>" class="form-control" placeholder="Ex: Melhorar postura, correr 5km...">
                            </div>
                            <div class="form-group">
                                <label>Tem alguma data ou evento específico para o qual deseja se preparar?</label>
                                <input type="text" name="anamnesis[target_event]" value="<%= anamnesis.target_event || '' %>" class="form-control" placeholder="Ex: Casamento em Dezembro">
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-heartbeat"></i> Histórico Médico</h3>
                            </div>
                            <div class="form-group">
                                <label>Condições médicas relevantes (diabetes, hipertensão, etc)</label>
                                <textarea name="anamnesis[medical_conditions]" class="form-control" rows="2"><%= anamnesis.medical_conditions || '' %></textarea>
                            </div>
                            <div class="form-group">
                                <label>Uso de medicamentos contínuos</label>
                                <textarea name="anamnesis[medications]" class="form-control" rows="2"><%= anamnesis.medications || '' %></textarea>
                            </div>
                            <div class="form-group">
                                <label>Cirurgias realizadas (Quais e quando?)</label>
                                <textarea name="anamnesis[surgeries]" class="form-control" rows="2"><%= anamnesis.surgeries || '' %></textarea>
                            </div>
                            <div class="form-group">
                                <label>Alergias ou restrições alimentares</label>
                                <textarea name="anamnesis[allergies]" class="form-control" rows="2"><%= anamnesis.allergies || '' %></textarea>
                            </div>
                            <div class="form-group">
                                <label>Histórico de lesões (Joelho, ombro, coluna...)</label>
                                <textarea name="anamnesis[injuries]" class="form-control" rows="2"><%= anamnesis.injuries || '' %></textarea>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-running"></i> Estilo de Vida</h3>
                            </div>
                            <div class="grid-2">
                                <div class="form-group">
                                    <label>Nível de Atividade Atual</label>
                                    <select name="anamnesis[activity_level]" class="form-control">
                                        <option value="Sedentário">Sedentário</option>
                                        <option value="Leve">Leve (1-2x semana)</option>
                                        <option value="Moderado">Moderado (3-4x semana)</option>
                                        <option value="Intenso">Intenso (5x+ semana)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Frequência de treino atual</label>
                                    <input type="text" name="anamnesis[training_frequency]" value="<%= anamnesis.training_frequency || '' %>" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Experiência prévia (Já treinou? O que?)</label>
                                <textarea name="anamnesis[exercise_history]" class="form-control" rows="2"><%= anamnesis.exercise_history || '' %></textarea>
                            </div>
                            <div class="form-group">
                                <label>Alimentação Atual (Descreva brevemente)</label>
                                <textarea name="anamnesis[diet_description]" class="form-control" rows="3"><%= anamnesis.diet_description || '' %></textarea>
                            </div>
                            <div class="form-group">
                                <label>Horas de sono por noite (Média)</label>
                                <input type="number" name="anamnesis[sleep_hours]" value="<%= anamnesis.sleep_hours || '' %>" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Maiores Desafios (Tempo, motivação, energia...)</label>
                                <textarea name="anamnesis[challenges]" class="form-control" rows="2"><%= anamnesis.challenges || '' %></textarea>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-thumbs-up"></i> Preferências</h3>
                            </div>
                            <div class="form-group">
                                <label>Atividades que MAIS gosta</label>
                                <input type="text" name="anamnesis[liked_activities]" value="<%= anamnesis.liked_activities || '' %>" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Atividades que NÃO gosta / Evita</label>
                                <input type="text" name="anamnesis[disliked_activities]" value="<%= anamnesis.disliked_activities || '' %>" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Local de Treino Preferido</label>
                                <select name="anamnesis[workout_location]" class="form-control">
                                    <option value="Academia" <%= anamnesis.workout_location === 'Academia' ? 'selected' : '' %>>Academia</option>
                                    <option value="Casa" <%= anamnesis.workout_location === 'Casa' ? 'selected' : '' %>>Em Casa</option>
                                    <option value="Ao Ar Livre" <%= anamnesis.workout_location === 'Ao Ar Livre' ? 'selected' : '' %>>Ao Ar Livre</option>
                                    <option value="Híbrido" <%= anamnesis.workout_location === 'Híbrido' ? 'selected' : '' %>>Híbrido</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Disponibilidade (Dias e Horários)</label>
                                <input type="text" name="anamnesis[availability]" value="<%= anamnesis.availability || '' %>" class="form-control" placeholder="Ex: Seg a Sex, 18h">
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title"><i class="fas fa-ruler"></i> Medidas Corporais</h3>
                            </div>
                            <div class="grid-3">
                                <div class="form-group">
                                    <label>Peso (kg)</label>
                                    <input type="number" step="0.1" name="anamnesis[weight]" value="<%= anamnesis.weight || '' %>" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Altura (cm)</label>
                                    <input type="number" name="anamnesis[height]" value="<%= anamnesis.height || '' %>" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>% Gordura (Estimado)</label>
                                    <input type="number" step="0.1" name="anamnesis[body_fat]" value="<%= anamnesis.body_fat || '' %>" class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Outras Medidas (Cintura, Quadril, Braço, Perna)</label>
                                <textarea name="anamnesis[body_measurements]" class="form-control" rows="2" placeholder="Ex: Cintura 80cm, Braço 35cm..."><%= anamnesis.body_measurements || '' %></textarea>
                            </div>
                        </div>

                        <div style="margin-bottom: 50px;">
                            <button type="submit" class="btn btn-primary btn-block" style="padding: 15px; font-size: 1.1rem;">
                                SALVAR FICHA COMPLETA
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
    <script src="/js/layout.js"></script>
</body>
</html>
