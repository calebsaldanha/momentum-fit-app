<%- include('../partials/header', { bodyClass: 'dashboard-body' }) %>

<div class="dashboard-container">
    <%- include('../partials/client-sidebar') %>

    <main class="dashboard-main">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h1>Meu Perfil</h1>
                <a href="/client/profile/edit" class="btn btn-secondary btn-sm">Editar Perfil</a>
            </div>

            <% if (user.status === 'pending_approval') { %>
                <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid #f59e0b; padding: 20px; border-radius: 12px; margin-bottom: 30px;">
                    <h4 style="color: #f59e0b; margin: 0 0 10px 0;">[Perfil em Análise]</h4>
                    <p style="margin: 0; color: #ccc;">Seus dados foram enviados. Aguarde a aprovação para acessar os treinos.</p>
                </div>
            <% } %>

            <% if (success) { %>
                <div class="alert alert-success" style="margin-bottom: 20px;"><%= success %></div>
            <% } %>

            <% if (!profile.id) { %>
                <div class="alert alert-warning">Perfil incompleto. <a href="/client/initial-form">Preencher agora</a></div>
            <% } else { %>
                <div class="client-info-grid">
                    <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                        <div class="info-card">
                            <h4>Dados Pessoais</h4>
                            <p><strong>Nome:</strong> <%= user.name %></p>
                            <p><strong>Idade:</strong> <%= profile.age %></p>
                            <p><strong>Telefone:</strong> <%= profile.phone %></p>
                            <p><strong>Gênero:</strong> <%= profile.gender_identity %></p>
                            <p><strong>Sexo Nasc.:</strong> <%= profile.sex_assigned_at_birth %></p>
                        </div>
                        
                        <div class="info-card">
                            <h4>Corpo & Saúde</h4>
                            <div style="display: flex; gap: 20px; align-items: center; margin-bottom: 15px;">
                                <div>
                                    <span style="display: block; font-size: 0.8rem; color: #888;">IMC</span>
                                    <strong style="font-size: 1.5rem; color: var(--c-accent-primary);"><%= imc %></strong>
                                </div>
                                <div>
                                    <p style="margin: 0;"><strong>Peso:</strong> <%= profile.weight %>kg</p>
                                    <p style="margin: 0;"><strong>Altura:</strong> <%= profile.height %>m</p>
                                </div>
                            </div>
                            <hr style="border-color: #333;">
                            <p style="margin-top: 10px;"><strong>Condições:</strong> <%= profile.medical_conditions || '-' %></p>
                            <p><strong>Lesões:</strong> <%= profile.injuries || '-' %></p>
                            <p><strong>Medicamentos:</strong> <%= profile.medications || '-' %></p>
                            <p><strong>Alergias:</strong> <%= profile.allergies || '-' %></p>
                        </div>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                        <div class="info-card">
                            <h4>Objetivos & Estilo de Vida</h4>
                            <p><strong>Principal:</strong> <%= profile.main_goal %></p>
                            <p><strong>Secundário:</strong> <%= profile.secondary_goals || '-' %></p>
                            <p><strong>Deadline:</strong> <%= profile.specific_event || '-' %></p>
                            <hr style="border-color: #333;">
                            <p><strong>Nível:</strong> <%= profile.fitness_level %></p>
                            <p><strong>Preferência:</strong> <%= profile.workout_preference %></p>
                            <p><strong>Gosta:</strong> <%= profile.liked_activities || '-' %></p>
                            <p><strong>Não Gosta:</strong> <%= profile.disliked_activities || '-' %></p>
                        </div>

                        <div class="info-card">
                            <h4>Rotina</h4>
                            <p><strong>Disponibilidade:</strong> <%= profile.availability || '-' %></p>
                            <p><strong>Desafios:</strong> <%= profile.challenges || '-' %></p>
                            <p><strong>Dieta:</strong> <%= profile.diet_description || '-' %></p>
                            <p><strong>Sono:</strong> <%= profile.sleep_hours || '-' %></p>
                        </div>
                    </div>
                </div>

                <% } %>
        </div>
    </main>
</div>
<%- include('../partials/footer') %>
