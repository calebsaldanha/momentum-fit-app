<%- include('../partials/header.ejs', { title: 'Meu Perfil', bodyClass: 'dashboard-body' }) %>

<div class="dashboard-container">
    <aside class="dashboard-sidebar">
        <nav class="sidebar-nav">
            <a href="/client/dashboard" class="nav-item"><span></span> Dashboard</a>
            <a href="/client/workouts" class="nav-item"><span></span> Meus Treinos</a>
            <a href="/chat" class="nav-item"><span></span> Chat</a>
            <a href="/client/profile" class="nav-item active"><span></span> Meu Perfil</a>
        </nav>
        <div class="sidebar-footer">
            <form action="/auth/logout" method="POST" style="margin: 0;">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <button type="submit" class="btn-logout-sidebar">Sair</button>
            </form>
        </div>
    </aside>

    <main class="dashboard-main">
      <div class="section" style="max-width: 800px;">
            <div class="section-header">
                <h1>Meu Perfil</h1>
                <p>Mantenha seus dados atualizados para otimizar seus treinos.</p>
            </div>

            <form method="POST" action="/client/profile" class="dashboard-form">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <div class="form-group">
                    <label for="name">Seu nome</label>
                    <input type="text" id="name" name="name" value="<%= profile.name %>" required>
                </div>

                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="age">Idade</label>
                        <input type="number" id="age" name="age" min="16" max="100" required value="<%= profile.age || '' %>">
                    </div>
                    <div class="form-group">
                        <label for="fitness_level">Nível de Experiência</label>
                        <select id="fitness_level" name="fitness_level" required>
                            <option value="beginner" <%= profile.fitness_level === 'beginner' ? 'selected' : '' %>>Iniciante</option>
                            <option value="intermediate" <%= profile.fitness_level === 'intermediate' ? 'selected' : '' %>>Intermediário</option>
                            <option value="advanced" <%= profile.fitness_level === 'advanced' ? 'selected' : '' %>>Avançado</option>
                        </select>
                    </div>
                </div>

                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="weight">Peso (kg)</label>
                        <input type="number" id="weight" name="weight" step="0.1" min="30" max="200" value="<%= profile.weight || '' %>">
                    </div>
                    <div class="form-group">
                        <label for="height">Altura (cm)</label>
                        <input type="number" id="height" name="height" min="100" max="250" value="<%= profile.height || '' %>">
                    </div>
                </div>
                
                <div class="section-divider" style="height: 1px; background: var(--c-border); margin: 2rem 0;"></div>

                <div class="form-group">
                    <label for="goals">Objetivos Principais</label>
                    <textarea id="goals" name="goals" rows="4" required><%= profile.goals || '' %></textarea>
                </div>

                <div class="form-group">
                    <label for="medical_conditions">Condições Médicas / Lesões</label>
                    <textarea id="medical_conditions" name="medical_conditions" rows="3"><%= profile.medical_conditions || '' %></textarea>
                </div>

                <input type="hidden" name="training_days" value="<%= profile.training_days || '' %>">
                <input type="hidden" name="training_duration" value="<%= profile.training_duration || '' %>">
                <input type="hidden" name="equipment" value="<%= profile.equipment || '' %>">
                <input type="hidden" name="activity_level" value="<%= profile.activity_level || '' %>">

                <button type="submit" class="btn btn-primary" style="width: 100%;">Atualizar Perfil</button>
            </form>
        </div>
    </main>
</div>
<%- include('../partials/footer.ejs') %>
