<%- include('../partials/header.ejs', { title: 'Meu Perfil', currentPage: '/client/profile' }) %>

<div class="page-header">
    <h1>Meu Perfil</h1>
    <p>Gerencie suas informações pessoais.</p>
</div>

<div class="container" style="max-width: 800px; margin: 0 auto; padding: 0 20px;">
    <div class="card-box">
        <form action="/client/profile/update" method="POST" style="display: flex; flex-direction: column; gap: 20px;">
            <input type="hidden" name="_csrf" value="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
            
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="width: 100px; height: 100px; background: #222; border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: #bef202; border: 2px solid #bef202;">
                    <%= user.name.charAt(0) %>
                </div>
                <h3 style="color: white;"><%= user.name %></h3>
                <span class="text-neon">Aluno</span>
            </div>

            <div class="form-group">
                <label style="display: block; color: #ccc; margin-bottom: 8px;">Nome Completo</label>
                <input type="text" value="<%= user.name %>" disabled class="form-input" style="width: 100%; padding: 12px; background: #111; border: 1px solid #333; color: #888; border-radius: 6px;">
            </div>

            <div class="form-group">
                <label style="display: block; color: #ccc; margin-bottom: 8px;">Email</label>
                <input type="email" value="<%= user.email %>" disabled class="form-input" style="width: 100%; padding: 12px; background: #111; border: 1px solid #333; color: #888; border-radius: 6px;">
            </div>

            <% if (clientData) { %>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label style="display: block; color: #ccc; margin-bottom: 8px;">Peso (kg)</label>
                        <input type="number" name="weight" value="<%= clientData.current_weight || '' %>" class="form-input" style="width: 100%; padding: 12px; background: #0a0a0a; border: 1px solid #333; color: white; border-radius: 6px;">
                    </div>
                    <div class="form-group">
                        <label style="display: block; color: #ccc; margin-bottom: 8px;">Altura (cm)</label>
                        <input type="number" name="height" value="<%= clientData.height ? (clientData.height * 100) : '' %>" class="form-input" style="width: 100%; padding: 12px; background: #0a0a0a; border: 1px solid #333; color: white; border-radius: 6px;">
                    </div>
                </div>
                <div class="form-group">
                    <label style="display: block; color: #ccc; margin-bottom: 8px;">Objetivos</label>
                    <textarea name="goals" class="form-input" rows="3" style="width: 100%; padding: 12px; background: #0a0a0a; border: 1px solid #333; color: white; border-radius: 6px;"><%= clientData.fitness_goals || '' %></textarea>
                </div>
            <% } %>

            <button type="submit" class="btn btn-primary btn-full">Salvar Alterações</button>
        </form>
    </div>
</div>

<%- include('../partials/footer.ejs') %>
