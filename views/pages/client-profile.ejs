<%- include('../partials/header', { bodyClass: 'dashboard-body' }) %>

<div class="dashboard-container">
    <%- include('../partials/client-sidebar') %>

    <main class="dashboard-main">
        <div class="container">
            <h1>Meu Perfil</h1>

            <% if (user.status === 'pending_approval') { %>
                <div style="background: rgba(245, 158, 11, 0.1); border: 1px solid #f59e0b; padding: 20px; border-radius: 12px; margin-bottom: 30px; display: flex; align-items: center; gap: 15px;">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                    <div>
                        <h4 style="color: #f59e0b; margin: 0;">Perfil em Análise</h4>
                        <p style="margin: 0; color: #ccc;">Seus dados foram enviados. Aguarde a aprovação do seu treinador para acessar os treinos e o chat.</p>
                    </div>
                </div>
            <% } %>

            <% if (success) { %>
                <div class="alert alert-success" style="margin-bottom: 20px;"><%= success %></div>
            <% } %>

            <% if (!profile.id) { %>
                <div class="alert alert-warning">Perfil incompleto. <a href="/client/initial-form">Preencher agora</a></div>
            <% } else { %>

                <div class="client-info-grid">
                    <div class="info-card">
                        <h4>Dados Pessoais</h4>
                        <p><strong>Nome:</strong> <%= user.name %></p>
                        <p><strong>Email:</strong> <%= user.email %></p>
                        <p><strong>Idade:</strong> <%= profile.age %> anos</p>
                        <p><strong>Telefone:</strong> <%= profile.phone %></p>
                    </div>

                    <div class="info-card">
                        <h4>Composição Corporal</h4>
                        <p><strong>Peso:</strong> <%= profile.weight %> kg</p>
                        <p><strong>Altura:</strong> <%= profile.height %> m</p>
                        
                        <div style="display: flex; align-items: center; gap: 10px; margin: 10px 0;">
                            <div style="background: #222; padding: 10px 20px; border-radius: 8px; border: 1px solid var(--c-accent-primary);">
                                <span style="font-size: 0.8rem; color: #888; display: block;">IMC</span>
                                <strong style="font-size: 1.5rem; color: var(--c-accent-primary);"><%= imc || '--' %></strong>
                            </div>
                            <div style="font-size: 0.8rem; color: #666; max-width: 150px;">
                                Índice de Massa Corporal
                            </div>
                        </div>

                        <p><strong>Gordura:</strong> <%= profile.body_fat ? profile.body_fat + '%' : '-' %></p>
                    </div>

                    <div class="info-card" style="grid-column: 1 / -1;">
                        <h4>Objetivos</h4>
                        <p><strong>Principal:</strong> <%= profile.main_goal %></p>
                        <p><strong>Secundários:</strong> <%= profile.secondary_goals || '-' %></p>
                        <p><strong>Deadline:</strong> <%= profile.specific_event || 'Nenhum' %></p>
                    </div>
                </div>
            <% } %>
        </div>
    </main>
</div>
<%- include('../partials/footer') %>
