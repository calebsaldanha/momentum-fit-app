<%- include('../partials/header.ejs', { title: 'Detalhes do Aluno', bodyClass: 'dashboard-body' }) %>

<style>
    .details-container { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
    .profile-header { background: #111; padding: 2rem; border-radius: 12px; border: 1px solid #333; display: flex; align-items: center; gap: 2rem; margin-bottom: 2rem; }
    .profile-img { width: 100px; height: 100px; background: #333; border-radius: 50%; object-fit: cover; }
    .data-card { background: #111; border: 1px solid #333; border-radius: 12px; padding: 1.5rem; height: 100%; }
    .data-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
    .data-row { margin-bottom: 10px; border-bottom: 1px solid #222; padding-bottom: 5px; }
    .data-label { color: #888; font-size: 0.9rem; }
    .data-value { color: #fff; font-weight: 500; }
    .section-title { color: var(--c-accent-primary); margin-bottom: 1rem; font-size: 1.2rem; text-transform: uppercase; letter-spacing: 1px; }
    .btn-action { background: var(--c-accent-primary); color: #000; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: bold; }
</style>

<div class="details-container">
    
    <div class="profile-header">
        <img src="<%= client.profile_image || '/images/default-user.png' %>" class="profile-img" alt="Foto">
        <div style="flex: 1;">
            <h1 style="color: white; margin: 0;"><%= client.name %></h1>
            <p style="color: #888; margin: 5px 0;"><%= client.email %></p>
            <div style="margin-top: 10px;">
                <span class="badge" style="background: #222; color: #ccc; padding: 5px 10px; border-radius: 4px;">Aluno desde: <%= new Date(client.joined_at).toLocaleDateString() %></span>
            </div>
        </div>
        <div>
            <a href="/trainer/create-workout?client_id=<%= client.client_real_id %>&client_user_id=<%= client.user_id %>" class="btn-action">+ Novo Treino</a>
        </div>
    </div>

    <div class="data-grid">
        
        <div class="data-card">
            <h3 class="section-title">Ì±§ Corpo & Medidas</h3>
            <div class="data-row"><span class="data-label">Idade:</span> <span class="data-value"><%= client.age || '-' %> anos</span></div>
            <div class="data-row"><span class="data-label">Peso Atual:</span> <span class="data-value"><%= client.current_weight || '-' %> kg</span></div>
            <div class="data-row"><span class="data-label">Altura:</span> <span class="data-value"><%= client.height || '-' %> m</span></div>
            <div class="data-row"><span class="data-label">Gordura Corporal:</span> <span class="data-value"><%= client.body_fat || '-' %>%</span></div>
            <div class="data-row"><span class="data-label">Sexo Biol√≥gico:</span> <span class="data-value"><%= client.sex_assigned_at_birth || '-' %></span></div>
            
            <h4 style="color: #666; margin-top: 15px; font-size: 0.9rem;">Circunfer√™ncias</h4>
            <div class="data-row"><span class="data-label">Cintura:</span> <span class="data-value"><%= client.measure_waist || '-' %> cm</span></div>
            <div class="data-row"><span class="data-label">Quadril:</span> <span class="data-value"><%= client.measure_hip || '-' %> cm</span></div>
            <div class="data-row"><span class="data-label">Bra√ßo:</span> <span class="data-value"><%= client.measure_arm || '-' %> cm</span></div>
        </div>

        <div class="data-card">
            <h3 class="section-title">ÌæØ Objetivos & Rotina</h3>
            <div class="data-row"><span class="data-label">Objetivo Principal:</span> <span class="data-value"><%= client.fitness_goals %></span></div>
            <div class="data-row"><span class="data-label">Obj. Secund√°rios:</span> <span class="data-value"><%= client.secondary_goals || '-' %></span></div>
            <div class="data-row"><span class="data-label">N√≠vel Fitness:</span> <span class="data-value"><%= client.fitness_level %></span></div>
            <div class="data-row"><span class="data-label">Frequ√™ncia:</span> <span class="data-value"><%= client.training_days_frequency || client.training_days %> dias/sem</span></div>
            <div class="data-row"><span class="data-label">Local:</span> <span class="data-value"><%= client.workout_preference %></span></div>
            <div class="data-row"><span class="data-label">Disponibilidade:</span> <span class="data-value"><%= client.time_availability || client.availability %></span></div>
            <div class="data-row"><span class="data-label">Equipamentos:</span> <span class="data-value"><%= client.equipment || 'Nenhum' %></span></div>
        </div>

        <div class="data-card">
            <h3 class="section-title">Ìø• Sa√∫de & Lifestyle</h3>
            <div class="data-row">
                <span class="data-label">Condi√ß√µes M√©dicas:</span><br>
                <span class="data-value" style="color: #fca5a5;"><%= client.medical_conditions || 'Nenhuma' %></span>
            </div>
            <div class="data-row">
                <span class="data-label">Les√µes:</span><br>
                <span class="data-value" style="color: #fca5a5;"><%= client.injuries || 'Nenhuma' %></span>
            </div>
            <div class="data-row"><span class="data-label">Medicamentos:</span> <span class="data-value"><%= client.medications || '-' %></span></div>
            <div class="data-row"><span class="data-label">Alergias:</span> <span class="data-value"><%= client.allergies || '-' %></span></div>
            <div class="data-row" style="margin-top: 10px;">
                <span class="data-label">Dieta:</span><br>
                <p class="data-value" style="font-size: 0.9rem;"><%= client.diet_description || '-' %></p>
            </div>
            <div class="data-row">
                <span class="data-label">Sono:</span> <span class="data-value"><%= client.sleep_hours || '-' %> horas</span>
            </div>
        </div>
    </div>

    <h3 style="color: white; margin-bottom: 1rem;">Hist√≥rico de Treinos</h3>
    <% if (workouts && workouts.length > 0) { %>
        <div style="display: grid; gap: 1rem;">
            <% workouts.forEach(w => { %>
                <div style="background: #1a1a1a; padding: 1rem; border-radius: 8px; border-left: 4px solid var(--c-accent-primary); display: flex; justify-content: space-between;">
                    <div>
                        <strong style="color: white;"><%= w.title %></strong>
                        <p style="color: #666; margin: 0; font-size: 0.9rem;"><%= w.description %></p>
                    </div>
                    <div style="text-align: right;">
                        <span style="color: #888; font-size: 0.8rem;"><%= new Date(w.created_at).toLocaleDateString() %></span><br>
                        <span style="color: <%= w.status === 'completed' ? '#4ade80' : '#facc15' %>"><%= w.status %></span>
                    </div>
                </div>
            <% }) %>
        </div>
    <% } else { %>
        <p style="color: #666;">Nenhum treino prescrito ainda.</p>
    <% } %>

</div>

<%- include('../partials/footer.ejs') %>
