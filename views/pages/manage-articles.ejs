<%- include('../partials/header') %>
<div class="main-layout">
    <%- include('../partials/admin-sidebar') %>
    
    <main class="content">
        <div class="page-header">
            <div>
                <h1>Gerenciar Artigos</h1>
                <p class="subtitle">Crie, edite e remova conteúdo do blog</p>
            </div>
            <a href="/articles/create" class="btn btn-primary">
                <i class="fas fa-plus"></i> Novo Artigo
            </a>
        </div>

        <div class="articles-list-admin">
            <% if (articles.length === 0) { %>
                <div class="empty-state">
                    <i class="fas fa-newspaper"></i>
                    <p>Nenhum artigo publicado ainda.</p>
                </div>
            <% } else { %>
                <div class="table-responsive">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Imagem</th>
                                <th>Título</th>
                                <th>Categoria</th>
                                <th>Data</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% articles.forEach(article => { %>
                                <tr>
                                    <td>
                                        <div class="article-thumb">
                                            <% if(article.image_url) { %>
                                                <img src="<%= article.image_url %>" alt="<%= article.title %>">
                                            <% } else { %>
                                                <div class="no-image"><i class="fas fa-image"></i></div>
                                            <% } %>
                                        </div>
                                    </td>
                                    <td><%= article.title %></td>
                                    <td><span class="badge"><%= article.category %></span></td>
                                    <td><%= new Date(article.created_at).toLocaleDateString('pt-BR') %></td>
                                    <td>
                                        <div class="actions">
                                            <a href="/articles/edit/<%= article.id %>" class="btn-icon" title="Editar">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <form action="/articles/delete/<%= article.id %>" method="POST" class="d-inline" onsubmit="return confirm('Tem certeza que deseja excluir este artigo?');">
                                                <button type="submit" class="btn-icon delete" title="Excluir">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
            <% } %>
        </div>
    </main>
</div>
<%- include('../partials/footer') %>
