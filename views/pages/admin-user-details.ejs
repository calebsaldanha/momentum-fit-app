<%- include('../partials/header') %>
<div class="dashboard-container">
    <%- include('../partials/sidebar', { path: '/admin/users' }) %>
    <main class="dashboard-main">
        
        <div style="display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; margin-bottom: 30px; gap: 15px;">
            <div>
                <a href="/admin/users" class="btn btn-outline btn-sm" style="margin-bottom: 10px; border-radius: 20px;">
                    <i class="fas fa-arrow-left"></i> Voltar
                </a>
                <h1 style="margin: 0;">Perfil de <span class="text-neon"><%= targetUser.name %></span></h1>
                <p style="color: #888; margin-top: 5px;">
                    <%= targetUser.email %> <span style="margin: 0 10px;">|</span> ID: #<%= targetUser.id %>
                </p>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <span class="badge-status" style="
                    padding: 8px 16px; border-radius: 30px; font-weight: bold; font-size: 0.9rem; display: flex; align-items: center; gap: 8px;
                    background: <%= targetUser.status === 'active' ? 'rgba(16,185,129,0.1)' : 'rgba(239,68,68,0.1)' %>;
                    color: <%= targetUser.status === 'active' ? '#10b981' : '#ef4444' %>;
                    border: 1px solid <%= targetUser.status === 'active' ? '#10b981' : '#ef4444' %>;">
                    <i class="fas fa-circle" style="font-size: 0.6rem;"></i> <%= targetUser.status.toUpperCase() %>
                </span>
            </div>
        </div>

        <div class="grid-layout" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px;">
            <div style="display: flex; flex-direction: column; gap: 25px;">
                <div class="card-box">
                    <h3 style="color: white; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px;">Dados</h3>
                    <p style="color:#ccc;">Perfil: <%= targetUser.role %></p>
                    <p style="color:#ccc;">Criado em: <%= new Date(targetUser.created_at).toLocaleDateString() %></p>
                </div>
            </div>

            <div class="card-box" style="border: 1px solid #ff4444;">
                <h3 style="color: #ff4444; border-bottom: 1px solid #ff4444; padding-bottom: 10px; margin-bottom: 15px;">
                    <i class="fas fa-skull"></i> Zona de Perigo
                </h3>
                <p style="color: #999; font-size: 0.9rem; margin-bottom: 20px;">
                    Ações aqui são irreversíveis. Cuidado.
                </p>
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <% if (targetUser.status === 'active') { %>
                        <form action="/admin/users/reject/<%= targetUser.id %>" method="POST">
                            <button class="btn btn-outline" style="color: #f59e0b; border-color: #f59e0b;">Suspender</button>
                        </form>
                    <% } else { %>
                        <form action="/admin/users/approve/<%= targetUser.id %>" method="POST">
                            <button class="btn btn-outline" style="color: #10b981; border-color: #10b981;">Reativar</button>
                        </form>
                    <% } %>

                    <form action="/admin/users/delete/<%= targetUser.id %>" method="POST" onsubmit="return confirm('ATENÇÃO: Isso apagará TODOS os dados deste usuário (treinos, pagamentos, histórico) permanentemente. Continuar?');">
                        <button class="btn btn-primary" style="background: #ff4444; border: none; color: white;">
                            <i class="fas fa-trash"></i> Excluir Dados
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>
</div>
<%- include('../partials/footer') %>
