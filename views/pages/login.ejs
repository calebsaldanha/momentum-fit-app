<%- include('../partials/header.ejs') %>

<div class="auth-main-wrapper">
    <div class="auth-overlay"></div>
    
    <div class="auth-card">
        <h2>Bem-vindo de volta</h2>
        <p>Acesse sua conta para continuar</p>

        <% if (error) { %>
            <div class="auth-msg auth-msg-error">
                <i class="fas fa-exclamation-circle"></i> <%= error %>
            </div>
        <% } %>
        <% if (success) { %>
            <div class="auth-msg auth-msg-success">
                <i class="fas fa-check-circle"></i> <%= success %>
            </div>
        <% } %>

        <form action="/auth/login" method="POST" id="loginForm">
            <input type="hidden" name="_csrf" value="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
            
            <div class="form-group">
                <label for="email">E-mail</label>
                <input type="email" name="email" id="email" placeholder="seu@email.com" required>
            </div>

            <div class="form-group">
                <label for="password">Senha</label>
                <input type="password" name="password" id="password" placeholder="••••••••" required>
            </div>

            <a href="/auth/forgot-password" class="forgot-pass">Esqueceu a senha?</a>

            <button type="submit" class="btn btn-primary btn-full btn-lg" id="submitBtn">
                Entrar <i class="fas fa-arrow-right" style="margin-left: 10px;"></i>
            </button>
        </form>

        <p style="margin-top: 2rem; margin-bottom: 0;">
            Ainda não tem conta? <a href="/auth/register" class="auth-link">Cadastre-se</a>
        </p>
    </div>
</div>

<script>
    // Validação Visual Simples
    const form = document.getElementById('loginForm');
    const emailInput = document.getElementById('email');
    const btn = document.getElementById('submitBtn');

    form.addEventListener('submit', (e) => {
        if (!emailInput.value.includes('@')) {
            e.preventDefault();
            emailInput.style.borderColor = '#ff4d4d';
            alert('Por favor, insira um e-mail válido.');
        } else {
            // Efeito de loading no botão
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Entrando...';
            btn.style.opacity = '0.7';
        }
    });

    emailInput.addEventListener('input', () => {
        emailInput.style.borderColor = '#333'; // Reset cor
    });
</script>

<%- include('../partials/footer.ejs') %>
