<%- include('../partials/header.ejs', { title: 'Complete seu Perfil - Momentum Fit', bodyClass: 'dashboard-body' }) %>

<style>
    /* Estilos exclusivos para o layout de duas colunas desta página */
    .split-layout {
        display: grid;
        grid-template-columns: 1fr;
        min-height: 100vh; /* Garante que ocupe a altura total da tela */
    }
    
    .form-side {
        padding: 2rem;
        /* CORREÇÃO AQUI: Adiciona espaço no topo para compensar o Header Fixo (80px + espaçamento) */
        padding-top: 120px; 
        background: linear-gradient(to bottom, #0f0f0f, #050505);
        display: flex;
        justify-content: center;
        align-items: flex-start;
    }
    
    .form-container {
        width: 100%;
        max-width: 600px;
        /* Removemos o padding-top extra daqui pois já aplicamos no container pai */
        padding-bottom: 4rem;
    }

    .image-side {
        display: none; /* Escondido em mobile */
        background: url('/images/hero-bg.png') no-repeat center center;
        background-size: cover;
        position: relative;
    }
    
    /* Filtro sobre a imagem para dar o tom da marca */
    .image-side::after {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: linear-gradient(135deg, rgba(5,5,5,0.7), rgba(190, 242, 2, 0.1));
    }

    @media (min-width: 992px) {
        .split-layout {
            grid-template-columns: 1.2fr 0.8fr; /* Lado do form um pouco maior */
        }
        .image-side {
            display: block;
        }
    }

    .section-header h1 { font-size: 2.2rem; margin-bottom: 0.5rem; }
    .section-header p { color: var(--c-text-secondary); margin-bottom: 2rem; }
    
    .section-divider {
        height: 1px;
        background: var(--c-border);
        margin: 2rem 0;
        position: relative;
    }
    .section-divider span {
        position: absolute;
        top: -10px; left: 0;
        background: #0f0f0f;
        padding-right: 1rem;
        font-size: 0.85rem;
        color: var(--c-accent-primary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
</style>

<div class="split-layout">
    <div class="form-side">
        <div class="form-container">
            <div class="section-header">
                <h1>Seu Perfil, Seu Momentum</h1>
                <p>Responda com atenção. Essas respostas são a base para o seu treinador criar o plano perfeito para você.</p>
            </div>

            <% if (typeof error !== 'undefined' && error) { %>
                <div class="alert alert-error" style="color: #ef4444; background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; border: 1px solid rgba(239, 68, 68, 0.2);"><%= error %></div>
            <% } %>

            <form method="POST" action="/client/initial-form">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">

                <div class="section-divider"><span>Dados Corporais</span></div>
                
                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="age">Idade</label>
                        <input type="number" id="age" name="age" min="16" max="100" required placeholder="Anos">
                    </div>
                    <div class="form-group">
                        <label for="weight">Peso (kg)</label>
                        <input type="number" id="weight" name="weight" step="0.1" min="30" max="200" placeholder="Ex: 75.5">
                    </div>
                </div>
                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="height">Altura (cm)</label>
                        <input type="number" id="height" name="height" min="100" max="250" placeholder="Ex: 175">
                    </div>
                    <div class="form-group">
                        <label for="activity_level">Nível de Atividade Diária</label>
                        <select id="activity_level" name="activity_level" required>
                            <option value="">Selecione...</option>
                            <option value="sedentary">Sedentário (Trabalho sentado, pouco movimento)</option>
                            <option value="light">Leve (Caminhadas eventuais, trabalho em pé)</option>
                            <option value="moderate">Moderado (Movimento constante)</option>
                            <option value="active">Muito Ativo (Trabalho físico pesado)</option>
                        </select>
                    </div>
                </div>

                <div class="section-divider"><span>Rotina de Treino</span></div>

                <div class="form-group">
                    <label for="fitness_level">Nível de Experiência em Treino</label>
                    <select id="fitness_level" name="fitness_level" required>
                        <option value="">Selecione...</option>
                        <option value="beginner">Iniciante (Nunca treinei ou estou parado há muito tempo)</option>
                        <option value="intermediate">Intermediário (Treino regularmente há pelo menos 6 meses)</option>
                        <option value="advanced">Avançado (Treino pesado com consistência há anos)</option>
                    </select>
                </div>

                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="training_days">Dias Disponíveis/Semana</label>
                        <select id="training_days" name="training_days" required>
                            <option value="1">1 dia</option>
                            <option value="2">2 dias</option>
                            <option value="3">3 dias</option>
                            <option value="4">4 dias</option>
                            <option value="5">5 dias</option>
                            <option value="6">6 dias</option>
                            <option value="7">Todos os dias</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="training_duration">Tempo por Treino</label>
                        <select id="training_duration" name="training_duration" required>
                            <option value="30min">30 minutos</option>
                            <option value="45min">45 minutos</option>
                            <option value="60min">60 minutos (1 hora)</option>
                            <option value="90min">90 minutos+</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="equipment">Onde você vai treinar?</label>
                    <select id="equipment" name="equipment" required>
                        <option value="">Selecione...</option>
                        <option value="gym">Academia Completa</option>
                        <option value="condo_gym">Academia de Condomínio (Equipamentos limitados)</option>
                        <option value="home_weights">Em Casa (Com halteres/pesos)</option>
                        <option value="home_bodyweight">Em Casa (Apenas peso do corpo)</option>
                        <option value="park">Ao Ar Livre / Parque</option>
                    </select>
                </div>

                <div class="section-divider"><span>Objetivos e Saúde</span></div>

                <div class="form-group">
                    <label for="goals">Qual é o seu objetivo principal?</label>
                    <textarea id="goals" name="goals" rows="3" placeholder="Seja específico. Ex: Quero perder 5kg de gordura e definir o abdômen para o verão. Tenho dificuldade em ganhar perna." required></textarea>
                </div>

                <div class="form-group">
                    <label for="medical_conditions">Histórico Médico e Lesões</label>
                    <textarea id="medical_conditions" name="medical_conditions" rows="3" placeholder="Você tem alguma lesão antiga? Dores no joelho, coluna ou ombro? Toma algum medicamento controlado? Se não, digite 'Nenhum'."></textarea>
                </div>

                <div class="form-actions" style="margin-top: 2rem;">
                    <button type="submit" class="btn btn-primary" style="width: 100%; padding: 1.2rem; font-size: 1rem;">Salvar e Iniciar Minha Jornada</button>
                </div>
            </form>
        </div>
    </div>

    <div class="image-side">
        </div>
</div>
<%- include('../partials/footer.ejs') %>
