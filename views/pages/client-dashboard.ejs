<%- include('../partials/header.ejs', { title, bodyClass: 'dashboard-body' }) %>
<div class="dashboard-container">
    <main class="dashboard-main" style="margin-left: 0; padding: 2rem;">
        <section class="section">
            <div class="section-header">
                <h1>Bem-vindo, <%= user.name %>!</h1>
                <p>Aqui estão os seus planos de treino ativos.</p>
            </div>

            <div class="workouts-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 2rem;">
                <% if (workouts && workouts.length > 0) { %>
                    <% workouts.forEach(workout => { %>
                        <div class="info-card">
                            <h3><%= workout.title %></h3>
                            <p style="color: var(--c-text-secondary); margin-bottom: 1.5rem;">Treinador: <%= workout.trainer_name %></p>
                            <a href="/workouts/<%= workout.id %>" class="btn btn-primary">Ver Treino Completo</a>
                        </div>
                    <% }) %>
                <% } else { %>
                    <div class="empty-state">
                        <h3>Nenhum treino para você ainda.</h3>
                        <p>O seu treinador irá montar o seu plano em breve.</p>
                        <a href="/chat" class="btn btn-outline">Enviar Mensagem</a>
                    </div>
                <% } %>
            </div>
        </section>

        <% if (checkins && checkins.length > 0) { %>
            <section class="section" style="margin-top: 3rem;">
                <h2>A sua Evolução</h2>
                <div style="max-width: 800px; margin-top: 2rem; background: var(--c-bg-card); padding: 1.5rem; border-radius: var(--radius);">
                    <canvas id="progressChart"></canvas>
                </div>
            </section>
        <% } %>
    </main>
</div>
<%- include('../partials/footer.ejs') %>
