<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <img src="/images/momentum-fit-icon.png" alt="Momentum" class="logo-rounded" style="width: 40px; height: 40px;">
        <span style="font-weight: 800; font-size: 1.2rem; color: white;">Momentum</span>
    </div>

    <nav class="sidebar-nav">
        <% if (user.role === 'client') { %>
            <a href="/client/dashboard" class="nav-link <%= path === '/client/dashboard' ? 'active' : '' %>">
                <i class="fas fa-home"></i> <span>Visão Geral</span>
            </a>
            <a href="/client/workouts" class="nav-link <%= path.includes('/workouts') ? 'active' : '' %>">
                <i class="fas fa-dumbbell"></i> <span>Meus Treinos</span>
            </a>
            <a href="/client/evolution" class="nav-link <%= path.includes('/evolution') ? 'active' : '' %>">
                <i class="fas fa-chart-line"></i> <span>Evolução</span>
            </a>
            <a href="/client/ai-coach" class="nav-link <%= path.includes('/ai-coach') ? 'active' : '' %>">
                <i class="fas fa-robot"></i> <span>Coach IA</span>
            </a>
            <a href="/client/financial" class="nav-link <%= path.includes('/financial') ? 'active' : '' %>">
                <i class="fas fa-wallet"></i> <span>Assinatura</span>
            </a>
        <% } else if (user.role === 'trainer') { %>
            <a href="/trainer/dashboard" class="nav-link <%= path === '/trainer/dashboard' ? 'active' : '' %>">
                <i class="fas fa-home"></i> <span>Dashboard</span>
            </a>
            <a href="/trainer/clients" class="nav-link <%= path.includes('/clients') ? 'active' : '' %>">
                <i class="fas fa-users"></i> <span>Alunos</span>
            </a>
            <a href="/trainer/library" class="nav-link <%= path.includes('/library') ? 'active' : '' %>">
                <i class="fas fa-book"></i> <span>Biblioteca</span>
            </a>
            <a href="/trainer/financial" class="nav-link <%= path.includes('/financial') ? 'active' : '' %>">
                <i class="fas fa-coins"></i> <span>Financeiro</span>
            </a>
        <% } else if (user.role === 'admin' || user.role === 'superadmin') { %>
            <a href="/admin/dashboard" class="nav-link <%= path === '/admin/dashboard' ? 'active' : '' %>">
                <i class="fas fa-chart-pie"></i> <span>Dashboard</span>
            </a>
            <a href="/admin/users" class="nav-link <%= path.includes('/users') ? 'active' : '' %>">
                <i class="fas fa-users-cog"></i> <span>Usuários</span>
            </a>
            <a href="/admin/approvals" class="nav-link <%= path.includes('/approvals') ? 'active' : '' %>">
                <i class="fas fa-check-circle"></i> <span>Aprovações</span>
            </a>
        <% } %>
        
        <div style="margin-top: auto; border-top: 1px solid #222; padding-top: 10px;">
            <% 
                let profileLink = '/client/profile';
                if(user.role === 'trainer') profileLink = '/trainer/profile';
                if(user.role === 'admin' || user.role === 'superadmin') profileLink = '/admin/settings';
            %>
            <a href="<%= profileLink %>" class="nav-link <%= path.includes('/profile') || path.includes('/settings') ? 'active' : '' %>">
                <i class="fas fa-user-circle"></i> <span>Perfil</span>
            </a>
            <a href="/auth/logout" class="nav-link" style="color: #ff6b6b;">
                <i class="fas fa-sign-out-alt"></i> <span>Sair</span>
            </a>
        </div>
    </nav>
</aside>

<div id="dashboardOverlay" class="dashboard-overlay" onclick="toggleSidebar()"></div>

<script>
    // Script de segurança para garantir funcionalidade do menu
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('dashboardOverlay');
        if (sidebar) sidebar.classList.toggle('active');
        if (overlay) overlay.classList.toggle('active');
    }
</script>
