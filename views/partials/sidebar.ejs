<aside class="sidebar" id="sidebar">
    
    <div class="sidebar-header">
        <a href="/" class="sidebar-brand">
            <img src="/images/momentum-fit-icon.png" alt="Momentum" class="logo-rounded" style="width: 35px; height: 35px; border: 2px solid #bef202;">
            <span>Momentum</span>
        </a>
        <button class="sidebar-close-btn" onclick="toggleSidebar()" aria-label="Fechar Menu">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <nav class="sidebar-nav" style="flex: 1; overflow-y: auto;">
        
        <% if (user.role === 'client') { %>
            <a href="/client/dashboard" class="nav-link <%= path === '/client/dashboard' ? 'active' : '' %>">
                <i class="fas fa-home"></i> <span>Visão Geral</span>
            </a>
            <a href="/client/workouts" class="nav-link <%= path.includes('/workouts') ? 'active' : '' %>">
                <i class="fas fa-dumbbell"></i> <span>Meus Treinos</span>
            </a>
            <a href="/client/evolution" class="nav-link <%= path.includes('/evolution') ? 'active' : '' %>">
                <i class="fas fa-chart-line"></i> <span>Evolução</span>
            </a>
            <a href="/client/ai-coach" class="nav-link <%= path.includes('/ai-coach') ? 'active' : '' %>">
                <i class="fas fa-robot"></i> <span>Coach IA</span>
            </a>
            <a href="/client/financial" class="nav-link <%= path.includes('/financial') ? 'active' : '' %>">
                <i class="fas fa-wallet"></i> <span>Assinatura</span>
            </a>

        <% } else if (user.role === 'trainer') { %>
            <a href="/trainer/dashboard" class="nav-link <%= path === '/trainer/dashboard' ? 'active' : '' %>">
                <i class="fas fa-home"></i> <span>Dashboard</span>
            </a>
            <a href="/trainer/clients" class="nav-link <%= path.includes('/clients') ? 'active' : '' %>">
                <i class="fas fa-users"></i> <span>Alunos</span>
            </a>
            <a href="/trainer/library" class="nav-link <%= path.includes('/library') ? 'active' : '' %>">
                <i class="fas fa-book-open"></i> <span>Biblioteca</span>
            </a>
            <a href="/trainer/financial" class="nav-link <%= path.includes('/financial') ? 'active' : '' %>">
                <i class="fas fa-dollar-sign"></i> <span>Financeiro</span>
            </a>

        <% } else if (user.role === 'admin' || user.role === 'superadmin') { %>
            <a href="/admin/dashboard" class="nav-link <%= path === '/admin/dashboard' ? 'active' : '' %>">
                <i class="fas fa-tachometer-alt"></i> <span>Painel</span>
            </a>
            <a href="/admin/users" class="nav-link <%= path.includes('/users') ? 'active' : '' %>">
                <i class="fas fa-users"></i> <span>Usuários</span>
            </a>
            <a href="/admin/approvals" class="nav-link <%= path.includes('/approvals') ? 'active' : '' %>">
                <i class="fas fa-check-double"></i> <span>Aprovações</span>
            </a>
        <% } %>

    </nav>

    <div class="sidebar-footer">
        <% 
            let profileLink = '/client/profile';
            if(user.role === 'trainer') profileLink = '/trainer/profile';
            if(user.role === 'admin' || user.role === 'superadmin') profileLink = '/admin/settings';
        %>
        
        <a href="<%= profileLink %>" class="nav-link <%= path.includes('/profile') || path.includes('/settings') ? 'active' : '' %>">
            <i class="fas fa-cog"></i> <span>Configurações</span>
        </a>
        
        <a href="/auth/logout" class="nav-link" style="color: #ff6b6b;">
            <i class="fas fa-sign-out-alt"></i> <span>Sair</span>
        </a>
    </div>
</aside>

<div id="dashboardOverlay" class="dashboard-overlay" onclick="toggleSidebar()"></div>

<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('dashboardOverlay');
        
        if (sidebar) sidebar.classList.toggle('active');
        if (overlay) overlay.classList.toggle('active');
        
        // Travar scroll do body no mobile quando menu aberto
        if (window.innerWidth < 992) {
            document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : '';
        }
    }
</script>
