<aside class="sidebar" id="mainSidebar">
    <a href="/" class="sidebar-brand">
        <img src="/images/momentum-fit-icon.png" alt="M" style="height: 32px;">
        <span>Momentum</span>
    </a>

    <nav class="sidebar-nav">
        <% const role = user.role; %>
        
        <% if (role === 'client') { %>
            <div class="nav-label">Treinamento</div>
            <a href="/client/dashboard" class="side-link <%= path.includes('/dashboard') ? 'active' : '' %>">
                <i class="fas fa-th-large"></i> Dashboard
            </a>
            <a href="/client/workouts" class="side-link <%= path.includes('/workouts') ? 'active' : '' %>">
                <i class="fas fa-dumbbell"></i> Meus Treinos
            </a>
            <a href="/client/evolution" class="side-link <%= path.includes('/evolution') ? 'active' : '' %>">
                <i class="fas fa-chart-line"></i> Evolução
            </a>

            <div class="nav-label">Inteligência</div>
            <a href="/client/ai-coach" class="side-link <%= path.includes('/ai-coach') ? 'active' : '' %>">
                <i class="fas fa-robot"></i> Momentum IA
            </a>
            <a href="/client/diet" class="side-link <%= path.includes('/diet') ? 'active' : '' %>">
                <i class="fas fa-apple-alt"></i> Nutrição
            </a>
        <% } %>

        <% if (role === 'trainer') { %>
            <div class="nav-label">Profissional</div>
            <a href="/trainer/dashboard" class="side-link <%= path.includes('/dashboard') ? 'active' : '' %>">
                <i class="fas fa-tachometer-alt"></i> Visão Geral
            </a>
            <a href="/trainer/clients" class="side-link <%= path.includes('/clients') ? 'active' : '' %>">
                <i class="fas fa-users"></i> Meus Alunos
            </a>
            <a href="/trainer/library" class="side-link <%= path.includes('/library') ? 'active' : '' %>">
                <i class="fas fa-book-medical"></i> Biblioteca
            </a>
            <a href="/trainer/financial" class="side-link <%= path.includes('/financial') ? 'active' : '' %>">
                <i class="fas fa-wallet"></i> Financeiro
            </a>
        <% } %>

        <% if (role === 'admin' || role === 'superadmin') { %>
            <div class="nav-label">Sistema</div>
            <a href="/admin/dashboard" class="side-link">
                <i class="fas fa-shield-alt"></i> Painel Admin
            </a>
            <a href="/admin/users" class="side-link">
                <i class="fas fa-user-cog"></i> Usuários
            </a>
        <% } %>

        <div class="nav-label">Conta</div>
        <a href="/profile" class="side-link <%= path.includes('/profile') ? 'active' : '' %>">
            <i class="fas fa-user-circle"></i> Perfil
        </a>
        <a href="/settings" class="side-link <%= path.includes('/settings') ? 'active' : '' %>">
            <i class="fas fa-cog"></i> Configurações
        </a>
    </nav>

    <div class="sidebar-footer">
        <div class="user-mini">
            <div class="user-avatar-placeholder">
                <%= user.name.charAt(0).toUpperCase() %>
            </div>
            <div class="user-details">
                <h4><%= user.name.split(' ')[0] %></h4>
                <a href="/auth/logout" style="color: #ff4d4d; font-size: 0.8rem; text-decoration: none;">Sair da conta</a>
            </div>
        </div>
    </div>
</aside>

<div id="sidebarOverlay" onclick="toggleSidebar()" 
     style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:99; backdrop-filter:blur(2px);">
</div>

<script>
    function toggleSidebar() {
        const sb = document.getElementById('mainSidebar');
        const ov = document.getElementById('sidebarOverlay');
        sb.classList.toggle('active');
        ov.style.display = sb.classList.contains('active') ? 'block' : 'none';
    }
</script>
