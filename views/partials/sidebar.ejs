<div id="mobile-overlay" class="mobile-overlay"></div>

<aside class="sidebar" id="sidebar">
    <div class="brand">
        <div><span>⚡</span> MOMENTUM</div>
        <button id="sidebar-close" class="sidebar-close-btn"><i class="fas fa-times"></i></button>
    </div>

    <nav class="nav-links">
        <% 
           // Normaliza roles para evitar erros de case
           const role = user.role ? user.role.toLowerCase() : 'client';
        %>

        <% if (role === 'client') { %>
            <div class="nav-category">Área do Atleta</div>
            <a href="/client/dashboard" class="nav-item <%= path === '/client/dashboard' ? 'active' : '' %>">
                <i class="fas fa-home"></i> Visão Geral
            </a>
            <a href="/client/workouts" class="nav-item <%= path.includes('/client/workouts') ? 'active' : '' %>">
                <i class="fas fa-dumbbell"></i> Meus Treinos
            </a>
            <a href="/client/evolution" class="nav-item <%= path === '/client/evolution' ? 'active' : '' %>">
                <i class="fas fa-chart-line"></i> Evolução
            </a>
            <a href="/client/ai-coach" class="nav-item <%= path === '/client/ai-coach' ? 'active' : '' %>">
                <i class="fas fa-robot"></i> AI Coach
            </a>
            <a href="/client/profile" class="nav-item <%= path === '/client/profile' ? 'active' : '' %>">
                <i class="fas fa-user-circle"></i> Perfil
            </a>
        <% } %>

        <% if (role === 'trainer') { %>
            <div class="nav-category">Área do Treinador</div>
            <a href="/trainer/dashboard" class="nav-item <%= path === '/trainer/dashboard' ? 'active' : '' %>">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
            <a href="/trainer/clients" class="nav-item <%= path.includes('/trainer/clients') ? 'active' : '' %>">
                <i class="fas fa-users"></i> Alunos
            </a>
            <a href="/trainer/workouts" class="nav-item <%= path.includes('/trainer/workouts') ? 'active' : '' %>">
                <i class="fas fa-book"></i> Biblioteca
            </a>
            <a href="/trainer/financial" class="nav-item <%= path === '/trainer/financial' ? 'active' : '' %>">
                <i class="fas fa-wallet"></i> Financeiro
            </a>
        <% } %>

        <% if (role === 'admin' || role === 'superadmin') { %>
            <div class="nav-category">Administração</div>
            <a href="/admin/dashboard" class="nav-item <%= path === '/admin/dashboard' ? 'active' : '' %>">
                <i class="fas fa-chart-pie"></i> KPIs & Métricas
            </a>
            <a href="/admin/users" class="nav-item <%= path === '/admin/users' ? 'active' : '' %>">
                <i class="fas fa-users-cog"></i> Gestão de Usuários
            </a>
            <a href="/admin/approvals" class="nav-item <%= path.includes('/admin/approvals') ? 'active' : '' %>">
                <i class="fas fa-check-double"></i> Aprovações
            </a>
            <a href="/admin/finance" class="nav-item <%= path === '/admin/finance' ? 'active' : '' %>">
                <i class="fas fa-money-bill-wave"></i> Financeiro Global
            </a>
            <a href="/admin/settings" class="nav-item <%= path === '/admin/settings' ? 'active' : '' %>">
                <i class="fas fa-cogs"></i> Configurações
            </a>
        <% } %>
    </nav>

    <div style="padding: 1.5rem; border-top: 1px solid var(--border-subtle);">
        <a href="/auth/logout" class="btn btn-outline btn-block" style="color: #ef4444; border-color: #ef4444; justify-content: flex-start;">
            <i class="fas fa-sign-out-alt" style="margin-right: 10px;"></i> Sair
        </a>
    </div>
</aside>
